(this["webpackJsonpfalcon-project"]=this["webpackJsonpfalcon-project"]||[]).push([[0],{70:function(e,t,n){e.exports=n(99)},75:function(e,t,n){},84:function(e,t,n){},89:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),s=n.n(o),c=(n(75),n(19)),i=n(7),u=n(12),l=n(101),m=n(102),p=n(61),f=(n(107),r.a.createContext(null)),h=function(e){return function(t){return r.a.createElement(f.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{firebase:n}))}))}},d=f,v=n(60),b=n(18),E=n(5),O=n.n(E),k=n(10),w=n(8),g=n(9),j=n(32),y=n.n(j),C=(n(77),n(79),n(81),{apiKey:"AIzaSyD93hKn54YxT1sAE5qKA3DZMyvAz0P6tKQ",authDomain:"falcon-project-f2431.firebaseapp.com",databaseURL:"https://falcon-project-f2431.firebaseio.com",projectId:"falcon-project-f2431",storageBucket:"falcon-project-f2431.appspot.com",messagingSenderId:"555496500915",appId:"1:555496500915:web:831bc1d32d318fa8504ac6",measurementId:"G-E492JJPFVW"}),x=function(){function e(){var t=this;Object(w.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},y.a.initializeApp(C),this.auth=y.a.auth(),this.db=y.a.database(),this.firestore=y.a.firestore()}return Object(g.a)(e,[{key:"createProfile",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,r={Email:n,Username:t,Timestamp:a},e.next=4,this.firestore.collection("User").doc(n).set(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadProfile",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("User").where("Username","==",t).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPost",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={Username:a,Title:t,Link:n},e.next=3,this.firestore.collection("Post").doc(t).set(r);case 3:return e.next=5,this.firestore.collection("Comments").doc(t).set(Object(b.a)({},a,null));case 5:return e.next=7,this.firestore.collection("Likes").doc(t).set({Total:0});case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"upvote",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n,a){var r,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,o={Total:r+=1},e.next=5,this.firestore.collection("Likes").doc(t).set(o);case 5:return e.sent,e.next=8,this.firestore.collection("User").doc(a).collection("Post").doc(t).set({isLiked:!0});case 8:e.sent;case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"downvote",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n,a){var r,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,-1===(r-=1)&&(r=0),o={Total:r},e.next=6,this.firestore.collection("Likes").doc(t).set(o);case 6:return e.sent,e.next=9,this.firestore.collection("User").doc(a).collection("Post").doc(t).delete();case 9:e.sent;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"removePost",value:function(){var e=Object(k.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("Post").doc(t).delete();case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updatePost",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n,a,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{Link:a,Title:n,Email:r},e.next=3,this.removePost(t);case 3:return e.sent,e.next=6,this.createPost(n,a,r);case 6:e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"commentPost",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.a)({},a,n),e.next=3,this.firestore.collection("Comments").doc(t).update(r);case 3:e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"deleteComment",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("Comments").doc(t).collection(n).delete();case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadPosts",value:function(){var e=Object(k.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("Post").get();case 2:return t=e.sent,n=[],t.forEach(function(){var e=Object(k.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.push(t.data());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadComments",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("Comments").doc(t).get();case 2:return n=e.sent,e.abrupt("return",n.data());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadLikes",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("Likes").doc(t).get();case 2:return n=e.sent,e.abrupt("return",n.data());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalComments",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var n,a,r,o,s,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("Comments").doc(t).get();case 2:n=e.sent,a=0,r=Object.keys(n.data()),o=n.data(),s=0,c=r;case 7:if(!(s<c.length)){e.next=17;break}if(i=c[s],null!==o[i]&&void 0!==o[i]){e.next=13;break}return e.abrupt("continue",14);case 13:a++;case 14:s++,e.next=7;break;case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserPostsLikes",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("User").doc(t).collection("Post").get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return e.id})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserComments",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var n,a,r,o,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("Comments").get();case 2:n=e.sent,a=n.docs,r=0,o=Object(v.a)(a),e.prev=6,o.s();case 8:if((s=o.n()).done){e.next=15;break}if(null!=s.value.data()[t]){e.next=12;break}return e.abrupt("continue",13);case 12:r++;case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),o.e(e.t0);case 20:return e.prev=20,o.f(),e.finish(20);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,this,[[6,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserPosts",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firestore.collection("Post").where("Username","==",t).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var P=n(13),S=n(14),U=(n(84),n(50)),L=n(52);n(89);function I(e){var t=Object(a.useState)({Liked:!1}),n=Object(u.a)(t,2),o=n[0],s=n[1],c=Object(a.useState)({Posts:[]}),i=Object(u.a)(c,2),l=(i[0],i[1]),m=Object(a.useContext)(d),p=localStorage.getItem("Email");Object(a.useEffect)((function(){m.getUserPostsLikes(p).then((function(t){l({Posts:t}),t.includes(e.title)&&s({Liked:!0})}))}),[]);var f=function(){o.Liked?(s({Liked:!1}),m.downvote(e.title,e.likes,p)):(s({Liked:!0}),m.upvote(e.title,e.likes,p))};return o.Liked?r.a.createElement("div",{className:"unliked-icon",onClick:function(){return f()}},r.a.createElement(U.a,{icon:L.a})):r.a.createElement("div",{className:"liked-icon",onClick:function(){return f()}},r.a.createElement(U.a,{icon:L.b}))}function A(e){var t=Object(i.f)(),n=Object(a.useState)({Likes:0}),o=Object(u.a)(n,2),s=o[0],c=o[1],l=Object(a.useState)({Comments:0}),m=Object(u.a)(l,2),p=m[0],f=m[1];Object(a.useEffect)((function(){e.firebase.loadLikes(e.title).then((function(e){console.log(e),c({Likes:e.Total})})),e.firebase.getTotalComments(e.title).then((function(e){f({Comments:e})}))}),[]);return r.a.createElement("div",{className:"total-tile-layout"},r.a.createElement("p",{className:"order-number"},e.number,"."),r.a.createElement(I,{title:e.title,likes:s.Likes}),r.a.createElement("div",{className:"tile-layout"},r.a.createElement("div",{className:"post-information"},r.a.createElement("a",{href:e.link},e.title)),r.a.createElement("div",{className:"post-bottom-information"},r.a.createElement("p",null,s.Likes," points by",r.a.createElement("span",{className:"profile-redirect",onClick:function(){t.push({pathname:"/profile/".concat(e.author),state:{Author:e.author}})}}," "+e.author)),r.a.createElement("span",{style:{marginRight:"calc(0.2vw)",marginLeft:"calc(0.2vw)"}},"|"),r.a.createElement("p",null,p.Comments," Comments"),r.a.createElement("span",{style:{marginRight:"calc(0.2vw)",marginLeft:"calc(0.2vw)"}},"|"),r.a.createElement("p",{onClick:function(){t.push({pathname:"/comment/".concat(e.title),state:{Title:e.title,Likes:s.Likes,Author:e.author}})},className:"comment-link"},"Comment"))))}n(94),r.a.Component;var T=n(37),R=(n(95),n(104)),N=n(103);r.a.Component;var W=n(26),D=r.a.createContext(null),G={PROFILE:"/profile/:name",CREATE:"/create_story",LOGIN:"/login",SIGNUP:"/signup",FORGOT_PASSWORD:"/forgot_password",HOME:"/",COMMENT:"/comment/:title"};(function(e){return function(t){var n=function(n){Object(S.a)(o,n);var a=Object(P.a)(o);function o(){return Object(w.a)(this,o),a.apply(this,arguments)}return Object(g.a)(o,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(n){e(n)||t.props.history.push(G.LOGIN)}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var n=this;return r.a.createElement(D.Consumer,null,(function(a){return e(a)?r.a.createElement(t,n.props):null}))}}]),o}(r.a.Component);return Object(W.a)(i.g,h)(n)}})((function(e){return!!e}))((function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(""),c=Object(u.a)(s,2),f=c[0],h=c[1],v=Object(a.useState)(!1),b=Object(u.a)(v,2),E=b[0],O=b[1],k=Object(a.useState)(!1),w=Object(u.a)(k,2),g=w[0],j=w[1],y=Object(a.useContext)(d),C=Object(i.f)(),x=function(){j(""===f),n.includes(".com")?O(!1):O(!0);if(f&&n){var e=localStorage.getItem("Username");y.createPost(f,n,e);C.push("/")}};return r.a.createElement(l.a,{fluid:!0},r.a.createElement(m.a,null,r.a.createElement(p.a,{md:{span:4,offset:1}},r.a.createElement(R.a,null,r.a.createElement(R.a.Group,{controlId:"formGroupEmail"},r.a.createElement(R.a.Label,null,"Title"),r.a.createElement(R.a.Control,{type:"text",placeholder:"Enter Title",onChange:function(e){return h(e.target.value)},isInvalid:g}),r.a.createElement(R.a.Control.Feedback,{type:"invalid"},"Please enter a valid Title")),r.a.createElement(R.a.Group,{controlId:"formGroupPassword"},r.a.createElement(R.a.Label,null,"URL"),r.a.createElement(R.a.Control,{type:"text",placeholder:"Enter Valid URL",onChange:function(e){return o(e.target.value)},isInvalid:E}),r.a.createElement(R.a.Control.Feedback,{type:"invalid"},"Please enter a valid url"))))),r.a.createElement(m.a,null,r.a.createElement(p.a,{md:{span:4,offset:1}},r.a.createElement(N.a,{onClick:function(){return x()}},"Create Post"))))}));var M=n(21),F={email:"",error:null},J=function(e){Object(S.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){var t=a.state.email;a.props.firebase.doPasswordReset(t).then((function(){a.setState(Object(M.a)({},F))})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.state=Object(M.a)({},F),a}return Object(g.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.error,a=""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:this.state.email,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("button",{disabled:a,type:"submit"},"Reset My Password"),n&&r.a.createElement("p",null,n.message))}}]),n}(a.Component),K=function(){return r.a.createElement("p",null,r.a.createElement(c.b,{to:G.FORGOT_PASSWORD},"Forgot Password?"))},Y=(h(J),a.Component,{username:"",email:"",passwordOne:"",passwordTwo:"",error:null}),_=function(e){Object(S.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){var t=a.state,n=t.username,r=t.email,o=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(r,o).then((function(e){return a.props.firebase.user(e.user.uid).set({username:n,email:r})})).then((function(){a.setState(Object(M.a)({},Y)),a.props.firebase.createProfile(n,r),localStorage.setItem("Email",r),localStorage.setItem("Username",n),a.props.history.push(G.HOME)})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.state=Object(M.a)({},Y),a}return Object(g.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.passwordOne,o=e.passwordTwo,s=e.error,c=a!==o||""===a||""===n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("p",null,"Enter Your Username:"),r.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Enter Username"}),r.a.createElement("p",null,"Enter Your Email:"),r.a.createElement("input",{name:"email",value:n,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("br",null),r.a.createElement("p",null,"Enter Password:"),r.a.createElement("input",{name:"passwordOne",value:a,onChange:this.onChange,type:"text",placeholder:"Password"}),r.a.createElement("p",null,"Confirm Password:"),r.a.createElement("input",{name:"passwordTwo",value:o,onChange:this.onChange,type:"text",placeholder:"Confirm Password"}),r.a.createElement("button",{disabled:c,type:"submit"},"Sign Up"),s&&r.a.createElement("p",null,s.message))}}]),n}(a.Component),z=function(){return r.a.createElement("p",null,"Dont have an account? ",r.a.createElement(c.b,{to:G.SIGNUP},"Sign Up"))},B=Object(W.a)(i.g,h)(_),H=(a.Component,{email:"",password:"",error:null}),V=function(e){Object(S.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,r).then((function(){a.setState(Object(M.a)({},H)),localStorage.setItem("Email",n),a.props.firebase.loadProfile(n).then((function(e){localStorage.setItem("Username",e.Username)})),a.props.history.push(G.HOME)})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.state=Object(M.a)({},H),a}return Object(g.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.error,o=""===n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("p",null,"Enter Your Email:"),r.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("p",null,"Enter Password:"),r.a.createElement("input",{name:"password",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{disabled:o,type:"submit"},"Sign In"),a&&r.a.createElement("p",null,a.message))}}]),n}(a.Component),q=Object(W.a)(i.g,h)(V),Q=(n(105),n(106),function(e){var t=function(t){Object(S.a)(a,t);var n=Object(P.a)(a);function a(e){var t;return Object(w.a)(this,a),(t=n.call(this,e)).state={authUser:null},t}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(t){t?e.setState({authUser:t}):e.setState({authUser:null})}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(D.Provider,{value:this.state.authUser},r.a.createElement(e,this.props))}}]),a}(r.a.Component);return h(t)}),Z=(n(59),h((function(e){var t=e.firebase;return r.a.createElement("button",{type:"button",onClick:t.doSignOut},"Sign Out")})),n(98),Q((function(){})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(d.Provider,{value:new x},r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[70,1,2]]]);
//# sourceMappingURL=main.563637a2.chunk.js.map